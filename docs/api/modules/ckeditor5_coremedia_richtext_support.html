<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ckeditor5-coremedia-richtext-support | CoreMedia CKEditor 5 Plugins</title><meta name="description" content="Documentation for CoreMedia CKEditor 5 Plugins"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://coremedia.com/">CoreMedia</a><a href="https://coremedia.github.io/ckeditor-plugins/">Pages</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">CoreMedia CKEditor 5 Plugins</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">CoreMedia CKEditor 5 Plugins</a></li><li><a href="ckeditor5_coremedia_richtext_support.html">ckeditor5-coremedia-richtext-support</a></li></ul><h1>Module ckeditor5-coremedia-richtext-support</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>The General RichText Support (“GRS”) ensures that any valid CoreMedia RichText,
especially attributes, may be loaded into CKEditor 5. It does not provide any
editing features, but only registers elements, attributes and attribute-values,
which are not yet supported by corresponding editing and/or data-processing
features.</p>
<p>GRS is based on CKEditor 5&#39;s General HTML Support (“GHS”). GRS shares the
same state as GHS, which is, as of now, an experimental state.</p>
</div><div class="tsd-comment tsd-typography"></div></section><section class="tsd-panel tsd-typography"><a id="md:coremedia-general-richtext-support" class="tsd-anchor"></a><h1><a href="#md:coremedia-general-richtext-support">CoreMedia General RichText Support</a></h1><p><a href="https://coremedia.github.io/ckeditor-plugins/docs/api/modules/ckeditor5_coremedia_richtext_support.html" title="@coremedia/ckeditor5-coremedia-richtext-support"><img src="https://img.shields.io/badge/docs-%F0%9F%93%83%20API-informational?style=for-the-badge" alt="API Documentation"></a></p>
<p><strong>Module:</strong> <code>@coremedia/ckeditor5-coremedia-richtext-support</code></p>
<p>The General RichText Support (“GRS”) ensures that any valid CoreMedia RichText,
especially attributes, may be loaded into CKEditor 5. It does not provide any
editing features, but only registers elements, attributes and attribute-values,
which are not yet supported by corresponding editing and/or data-processing
features.</p>
<p>GRS is based on CKEditor 5&#39;s <a href="https://ckeditor.com/docs/ckeditor5/latest/api/html-support.html" title="CKEditor 5 HTML Support feature - CKEditor 5 API docs">General HTML Support (“GHS”)</a>. GRS shares the
same state as GHS, which is, as of now, an experimental state.</p>
<p><strong>Not part of CoreMedia Essentials:</strong> This plugin is not part of the
<em>CoreMedia Essentials</em>, as it depends on your use-case, if you prefer running
CKEditor 5 in CoreMedia CMS with or without it.</p>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation</a></h2><pre><code class="language-text">pnpm install @coremedia/ckeditor5-coremedia-richtext-support
</code><button>Copy</button></pre>
<pre><code class="language-javascript"><span class="hl-10">import</span><span class="hl-2"> </span><span class="hl-6">CoreMediaRichTextSupport</span><br/><span class="hl-2">  </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-11">&#39;@coremedia/ckeditor5-coremedia-richtext/CoreMediaRichTextSupport&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">ClassicEditor</span><span class="hl-2">.</span><span class="hl-5">create</span><span class="hl-2">(</span><span class="hl-6">document</span><span class="hl-2">.</span><span class="hl-5">querySelector</span><span class="hl-2">(</span><span class="hl-11">&#39;.editor&#39;</span><span class="hl-2">), {</span><br/><span class="hl-2">  </span><span class="hl-6">plugins:</span><span class="hl-2"> [</span><br/><span class="hl-2">    </span><span class="hl-6">CoreMediaRichTextSupport</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">// ...</span><br/><span class="hl-2">  ],</span><br/><span class="hl-2">});</span>
</code><button>Copy</button></pre>
<a id="md:do-i-need-to-install-grs" class="tsd-anchor"></a><h2><a href="#md:do-i-need-to-install-grs">Do I need to install GRS?</a></h2><p>Most likely: Yes.</p>
<p>If all your RichText data are created via CKEditor 5 within CoreMedia CMS:
most likely not. You should consider installing GRS, if you answer one of the
following question with <em>&quot;yes&quot;</em>:</p>
<ul>
<li><p><strong>Do you use CoreMedia CMS from before introducing CKEditor 5?</strong></p>
<p>  This of course especially applies to the data created from previous
  CMS versions, as those, still using CKEditor 4.</p>
</li>
<li><p><strong>Do you create RichText with different CMS clients than CKEditor 5?</strong></p>
<p>  This applies to anything, from CoreMedia Unified API, XLIFF import,
  import from external sources (Content Hub), …</p>
</li>
</ul>
<p>If not installing GRS, any RichText, which is loaded and edited within
CKEditor 5 will get all elements and attributes removed, which cannot be created
by the installed CKEditor 5 editing features. This may be a desired behavior,
though.</p>
<a id="md:source-editing" class="tsd-anchor"></a><h2><a href="#md:source-editing">Source Editing</a></h2><p>The CKEditor Team recommends enabling the Source Editing feature if using GHS.
As GHS is the base technology for GRS, the same recommendation applies here.</p>
<p><strong>Special Note on Content Links and Content Blob Links (Images):</strong> Links are
represented in a way, so that CoreMedia Studio understands them. Thus, a link
to a content with ID <code>2</code> is represented as <code>content/2</code>. Similar to that, Content
Blob references are expressed as: <code>content/2#properties.data</code>.</p>
<p>Users may be more used to the more verbose Unified API (UAPI) format. For the
examples above this would be:</p>
<ul>
<li><code>coremedia:///cap/content/2</code></li>
<li><code>coremedia:///cap/blob/content/2#data</code></li>
</ul>
<p>As convenience in Source Editing, both formats are understood. Note though, that
when closing Source Editing, the links will be transformed to the CoreMedia
Studio format. Thus, when opening Source Editing the next time, you will see
<code>content/2</code> again, for example.</p>
<a id="md:pitfall-customizing-default-data-processing" class="tsd-anchor"></a><h2><a href="#md:pitfall-customizing-default-data-processing">Pitfall: Customizing Default Data-Processing</a></h2><p><strong>Short:</strong> When you adapt data-processing for new elements and/or attributes
to be represented in CoreMedia RichText 1.0, you most likely also have to
extend the configuration of General HTML Support, thus, introduce a
<code>htmlSupport</code> configuration section.</p>
<p><strong>Architecture:</strong> Prior to describing an important pitfall, which is relevant
as soon, as you customize data-processing like mapping an element unknown to
CoreMedia RichText 1.0 to a known element with some designated class attribute
value (such as <code>&lt;mark&gt;</code> to <code>&lt;span class=&quot;mark&quot;&gt;</code>), let&#39;s rephrase the
general architecture overview depicted in CKEditor 5 documentation on the
<a href="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/architecture/editing-engine.html" title="Editing engine - CKEditor 5 Documentation">Editing engine</a>:</p>
<p>There is a subtle difference between the data retrieved via <code>editor.getData()</code>
and the data transformed to CKEditor model and later to CKEditor view: While
<code>editor.getData()</code> will provide CoreMedia RichText 1.0, the internal data
view in CKEditor (as used for CoreMedia RichText 1.0 Editing) is represented
as HTML (which again is different from the HTML in editing view).</p>
<p><img src="docs/overview-ckeditor-editing-engine.normal.svg" alt="Overview CKEditor Editing Engine &amp; GHS/GRS">!</p>
<p><strong>Example:</strong></p>
<ul>
<li><p><strong>Data:</strong> By contract, a heading level 1 is represented in CoreMedia RichText
  1.0 as <code>&lt;p class=&quot;p--heading-1&quot;&gt;</code>.</p>
</li>
<li><p><strong>Data View:</strong> The <em>data view</em> when it comes to CoreMedia RichText 1.0 support
  is HTML. Thus, data-processing will transform <code>&lt;p class=&quot;p--heading-1&quot;&gt;</code> to
  <code>&lt;h1&gt;</code>.</p>
</li>
<li><p><strong>Model:</strong> CKEditor processing will now transform <code>&lt;h1&gt;</code> to <code>&lt;heading1&gt;</code>.</p>
</li>
<li><p><strong>Editing View:</strong> This is where editors write, copy and paste to, etc. It is
  the browser&#39;s representation and thus, again HTML. But different to the
  Data View, it may come with additional elements and attributes, like for
  example class attributes to mark a selection as result of an editing
  action.</p>
</li>
</ul>
<p><strong>General RichText/HTML Support is about the Data View:</strong> What is important to
know, is that any configuration for GRS (and thus GHS) applies to the Data View.</p>
<p>Thus, when a RichText paragraph may have an additional attribute like <code>dir</code> it
is insufficient just configuring the allowed attribute for element <code>&lt;p&gt;</code> in
GHS: You must also register the same attribute for all elements in Data View,
which will be mapped to <code>&lt;p&gt;</code> in Data later on. Thus, we will have to configure
GHS similar to this:</p>
<pre><code class="language-text">{
  htmlSupport: {
    allow: [{
      name: /^(p|h[1-6])$/,
      attributes: {
        dir: /(rtl|ltr)/,
      },
    }],
  },
}
</code><button>Copy</button></pre>
<p>This is, what is done by the <code>GeneralRichTextSupport</code> plugin for all elements
pre-configured in RichText Data Processing. But this does not know about any
customizations such as introducing new elements.</p>
<p><strong>What to do for custom elements and attributes?</strong> Luckily, the GHS
configuration is extensible. Thus, a plugin may enrich the configuration, and
you may as well decide adding <em>late</em> configuration, which is, when creating
the <code>ClassicEditor</code> instance.</p>
<p>Having this, introducing support for a new element such as <code>&lt;mark&gt;</code> from
<a href="https://ckeditor.com/docs/ckeditor5/latest/features/highlight.html" title="Highlight - CKEditor 5 Documentation">Highlight feature</a> requires two steps, if you want to ensure, that attributes
added via Unified API for example are not removed as soon as edited in CKEditor:</p>
<ol>
<li>Add data-processing to represent <code>&lt;mark&gt;</code> in CoreMedia RichText 1.0.</li>
<li>Extend GHS configuration provided by GRS by the new element.</li>
</ol>
<p>For the latter, GRS provides a convenience API called <em>RichText Aliases</em>.</p>
<p>If we decide representing <code>&lt;mark&gt;</code> as <code>&lt;span class=&quot;mark&quot;&gt;</code> you will require
two configuration entries <code>coremedia:richtext</code> and <code>coremedia:richtextSupport</code>:</p>
<pre><code class="language-javascript"><span class="hl-10">import</span><span class="hl-2"> </span><span class="hl-6">CoreMediaRichText</span><br/><span class="hl-2">  </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-11">&quot;@coremedia/ckeditor5-coremedia-richtext/CoreMediaRichText&quot;</span><span class="hl-2">;</span><br/><span class="hl-10">import</span><span class="hl-2"> </span><span class="hl-6">GeneralRichTextSupport</span><br/><span class="hl-2">  </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-11">&quot;@coremedia/ckeditor5-coremedia-richtext-support/GeneralRichTextSupport&quot;</span><span class="hl-2">;</span><br/><span class="hl-10">import</span><span class="hl-2"> {</span><span class="hl-6">replaceByElementAndClassBackAndForth</span><span class="hl-2">}</span><br/><span class="hl-2">  </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-11">&quot;@coremedia/ckeditor5-coremedia-richtext/rules/ReplaceBy&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-7">/* ... */</span><br/><br/><span class="hl-6">ClassicEditor</span><span class="hl-2">.</span><span class="hl-5">create</span><span class="hl-2">(</span><span class="hl-6">document</span><span class="hl-2">.</span><span class="hl-5">querySelector</span><span class="hl-2">(</span><span class="hl-11">&#39;.editor&#39;</span><span class="hl-2">), {</span><br/><span class="hl-2">  </span><span class="hl-6">plugins:</span><span class="hl-2"> [</span><br/><span class="hl-2">    </span><span class="hl-6">CoreMediaRichText</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">GeneralRichTextSupport</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">// ...</span><br/><span class="hl-2">  ],</span><br/><span class="hl-2">  </span><span class="hl-11">&quot;coremedia:richtext&quot;</span><span class="hl-6">:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-6">rules:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">elements:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">mark:</span><span class="hl-2"> </span><span class="hl-5">replaceByElementAndClassBackAndForth</span><span class="hl-2">(</span><span class="hl-11">&quot;mark&quot;</span><span class="hl-2">, </span><span class="hl-11">&quot;span&quot;</span><span class="hl-2">, </span><span class="hl-11">&quot;mark&quot;</span><span class="hl-2">),</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  </span><span class="hl-11">&quot;coremedia:richtextSupport&quot;</span><span class="hl-6">:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-6">aliases:</span><span class="hl-2"> [</span><br/><span class="hl-2">      {</span><br/><span class="hl-2">        </span><span class="hl-6">name:</span><span class="hl-2"> </span><span class="hl-11">&quot;mark&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-6">inherit:</span><span class="hl-2"> </span><span class="hl-11">&quot;span&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      }</span><br/><span class="hl-2">    ],</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">});</span>
</code><button>Copy</button></pre>
<p>As you see, this already uses a convenience API provided by the CoreMedia
plugins:</p>
<ul>
<li><p><strong><code>replaceByElementAndClassBackAndForth</code>:</strong></p>
<p>  This adds a rule, which maps <code>&lt;mark&gt;</code> to <code>&lt;span class=&quot;mark&quot;&gt;</code> in
  data-processing.</p>
</li>
</ul>
<p>The <code>coremedia:richtextSupport</code> configuration will inform the underlying
GHS feature, that <code>&lt;mark&gt;</code> may share the same attributes as <code>&lt;span&gt;</code>
from CoreMedia RichText 1.0 DTD.</p>
<p><strong>Less Convenient Configuration:</strong> A less convenient configuration exposes some
details, which may help to understand the processing better. So, if inlining
the convenience API from above, the example above will be similar to:</p>
<pre><code class="language-javascript"><span class="hl-6">ClassicEditor</span><span class="hl-2">.</span><span class="hl-5">create</span><span class="hl-2">(</span><span class="hl-6">document</span><span class="hl-2">.</span><span class="hl-5">querySelector</span><span class="hl-2">(</span><span class="hl-11">&#39;.editor&#39;</span><span class="hl-2">), {</span><br/><span class="hl-2">  </span><span class="hl-6">plugins:</span><span class="hl-2"> [</span><br/><span class="hl-2">    </span><span class="hl-6">CoreMediaRichText</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">GeneralHtmlSupport</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">GeneralRichTextSupport</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">// ...</span><br/><span class="hl-2">  ],</span><br/><span class="hl-2">  </span><span class="hl-11">&quot;coremedia:richtext&quot;</span><span class="hl-6">:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-6">rules:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">elements:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">mark:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-5">toData</span><span class="hl-6">:</span><span class="hl-2"> (</span><span class="hl-6">params</span><span class="hl-2">) </span><span class="hl-8">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">            </span><span class="hl-8">const</span><span class="hl-2"> { </span><span class="hl-16">node</span><span class="hl-2"> } = </span><span class="hl-6">params</span><span class="hl-2">;</span><br/><span class="hl-2">            </span><span class="hl-6">node</span><span class="hl-2">.</span><span class="hl-6">name</span><span class="hl-2"> = </span><span class="hl-11">&quot;span&quot;</span><span class="hl-2">;</span><br/><span class="hl-2">            </span><span class="hl-6">node</span><span class="hl-2">.</span><span class="hl-6">classList</span><span class="hl-2">.</span><span class="hl-5">add</span><span class="hl-2">(</span><span class="hl-11">&quot;mark&quot;</span><span class="hl-2">);</span><br/><span class="hl-2">          },</span><br/><span class="hl-2">          </span><span class="hl-6">toView:</span><span class="hl-2"> {</span><br/><span class="hl-2">            </span><span class="hl-5">span</span><span class="hl-6">:</span><span class="hl-2"> (</span><span class="hl-6">params</span><span class="hl-2">) </span><span class="hl-8">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">              </span><span class="hl-8">const</span><span class="hl-2"> { </span><span class="hl-16">node</span><span class="hl-2"> } = </span><span class="hl-6">params</span><span class="hl-2">;</span><br/><span class="hl-2">              </span><span class="hl-10">if</span><span class="hl-2"> (!</span><span class="hl-6">node</span><span class="hl-2">.</span><span class="hl-6">classList</span><span class="hl-2">.</span><span class="hl-5">contains</span><span class="hl-2">(</span><span class="hl-11">&quot;mark&quot;</span><span class="hl-2">)) {</span><br/><span class="hl-2">                </span><span class="hl-7">// It&#39;s another span, we are not responsible.</span><br/><span class="hl-2">                </span><span class="hl-10">return</span><span class="hl-2">;</span><br/><span class="hl-2">              }</span><br/><span class="hl-2">              </span><span class="hl-6">node</span><span class="hl-2">.</span><span class="hl-6">classList</span><span class="hl-2">.</span><span class="hl-5">remove</span><span class="hl-2">(</span><span class="hl-11">&quot;mark&quot;</span><span class="hl-2">);</span><br/><span class="hl-2">              </span><span class="hl-6">node</span><span class="hl-2">.</span><span class="hl-6">name</span><span class="hl-2"> = </span><span class="hl-11">&quot;mark&quot;</span><span class="hl-2">;</span><br/><span class="hl-2">            },</span><br/><span class="hl-2">          },</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  </span><span class="hl-11">&quot;coremedia:richtextSupport&quot;</span><span class="hl-6">:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-6">aliases:</span><span class="hl-2"> [</span><br/><span class="hl-2">      {</span><br/><span class="hl-2">        </span><span class="hl-6">name:</span><span class="hl-2"> </span><span class="hl-11">&quot;mark&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-6">inherit:</span><span class="hl-2"> </span><span class="hl-11">&quot;span&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      }</span><br/><span class="hl-2">    ],</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">});</span>
</code><button>Copy</button></pre>
<p>Having this example, you may see, how to create a lot more complex scenarios
for data-processing and GHS configuration. If you also decided adding an
attribute to <code>&lt;mark&gt;</code> element such as <code>&lt;mark data-priority=&quot;high&quot;&gt;</code>, you also
may want to declare this as part of the alias configuration:</p>
<pre><code class="language-text">{
  &quot;coremedia:richtextSupport&quot;: {
    aliases: [
      {
        name: &quot;mark&quot;,
        inherit: &quot;span&quot;,
        attributes: {
          &quot;data-priority&quot;: /^(high|medium|low)$/,
        }
      }
    ],
  },
}
</code><button>Copy</button></pre>
<p>Note, that such an approach is only required/recommended, if you ever expect
the corresponding RichText to be loaded in a CKEditor instance, which is
unable to handle <code>data-priority</code> attribute. In a default scenario, you would
have created a plugin, to edit this attribute, also dealing with up- and
downcast.</p>
<p><strong>Side Note:</strong> <em>Where to store <code>data-priority</code> in CoreMedia RichText?</em></p>
<p>CoreMedia RichText 1.0 does not support data attributes. One possible
solution is to transform it to some dedicated class, as can be seen below.</p>
<p>Given this data view (HTML):</p>
<pre><code class="language-html"><span class="hl-0">&lt;</span><span class="hl-1">mark</span><span class="hl-2"> </span><span class="hl-3">data-priority</span><span class="hl-2">=</span><span class="hl-4">&quot;high&quot;</span><span class="hl-0">&gt;</span><span class="hl-2">Text</span><span class="hl-0">&lt;/</span><span class="hl-1">mark</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;</span><span class="hl-1">mark</span><span class="hl-2"> </span><span class="hl-3">data-priority</span><span class="hl-2">=</span><span class="hl-4">&quot;low&quot;</span><span class="hl-0">&gt;</span><span class="hl-2">Text</span><span class="hl-0">&lt;/</span><span class="hl-1">mark</span><span class="hl-0">&gt;</span>
</code><button>Copy</button></pre>
<p>we may transform it to:</p>
<pre><code class="language-html"><span class="hl-0">&lt;</span><span class="hl-1">span</span><span class="hl-2"> </span><span class="hl-3">class</span><span class="hl-2">=</span><span class="hl-4">&quot;mark priority--high&quot;</span><span class="hl-0">&gt;</span><span class="hl-2">Text</span><span class="hl-0">&lt;/</span><span class="hl-1">span</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;</span><span class="hl-1">span</span><span class="hl-2"> </span><span class="hl-3">class</span><span class="hl-2">=</span><span class="hl-4">&quot;mark priority--low&quot;</span><span class="hl-0">&gt;</span><span class="hl-2">Text</span><span class="hl-0">&lt;/</span><span class="hl-1">span</span><span class="hl-0">&gt;</span>
</code><button>Copy</button></pre>
<a id="md:note-on-strictnesslegacy-and-disappearing-attributes" class="tsd-anchor"></a><h2><a href="#md:note-on-strictnesslegacy-and-disappearing-attributes">Note on Strictness.LEGACY and Disappearing Attributes</a></h2><p>GRS implements attribute registration according to mode <code>Strictness.LOOSE</code>.
Thus, it strictly follows attributes and their values, which will pass a
CoreMedia RichText 1.0 validation.</p>
<p>If using <code>Strictness.LEGACY</code> for Data-Processing, you most likely want to
extend possible values for a given attribute. This can be done by adapting
the configuration of the underlying <em>General HTML Support (GHS)</em>. An
explicit configuration as part of the Editor&#39;s configuration will override
the configuration as provided by GRS.</p>
<p><strong>Example:</strong> You decided to store any string value in <code>xlink:actuate</code> of a link.
On the CMS server you either disabled CoreMedia RichText 1.0 validation or you
configured a grammar, only similar but different to CoreMedia RichText 1.0.</p>
<p>You configured the CoreMedia Data-Processing with <code>Strictness.LEGACY</code>. Now you
need to tell GHS, that <code>xlink:actuate</code> is not only limited to values
<code>onLoad</code> or <code>onRequest</code> but accepts any string. To do so, you extend the
<code>htmlSupport</code> configuration similar to the one stated above.</p>
<p>All in all, your configuration will look similar to this:</p>
<pre><code class="language-javascript"><span class="hl-10">import</span><span class="hl-2"> </span><span class="hl-6">CoreMediaRichText</span><br/><span class="hl-2">  </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-11">&quot;@coremedia/ckeditor5-coremedia-richtext/CoreMediaRichText&quot;</span><span class="hl-2">;</span><br/><span class="hl-10">import</span><span class="hl-2"> </span><span class="hl-6">GeneralRichTextSupport</span><br/><span class="hl-2">  </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-11">&quot;@coremedia/ckeditor5-coremedia-richtext-support/GeneralRichTextSupport&quot;</span><span class="hl-2">;</span><br/><span class="hl-10">import</span><span class="hl-2"> {</span><span class="hl-6">replaceByElementAndClassBackAndForth</span><span class="hl-2">}</span><br/><span class="hl-2">  </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-11">&quot;@coremedia/ckeditor5-coremedia-richtext/rules/ReplaceBy&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-7">/* ... */</span><br/><br/><span class="hl-6">ClassicEditor</span><span class="hl-2">.</span><span class="hl-5">create</span><span class="hl-2">(</span><span class="hl-6">document</span><span class="hl-2">.</span><span class="hl-5">querySelector</span><span class="hl-2">(</span><span class="hl-11">&#39;.editor&#39;</span><span class="hl-2">), {</span><br/><span class="hl-2">  </span><span class="hl-6">plugins:</span><span class="hl-2"> [</span><br/><span class="hl-2">    </span><span class="hl-6">CoreMediaRichText</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">GeneralRichTextSupport</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">// For completeness you may want to add CKEditor&#39;s GeneralHtmlSupport in</span><br/><span class="hl-2">    </span><span class="hl-7">// here. But it also comes as transitive dependency of GeneralRichTextSupport.</span><br/><span class="hl-2">    </span><span class="hl-7">// ...</span><br/><span class="hl-2">  ],</span><br/><span class="hl-2">  </span><span class="hl-11">&quot;coremedia:richtext&quot;</span><span class="hl-6">:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-7">// Requires changes on server side regarding RichText validation.</span><br/><span class="hl-2">    </span><span class="hl-6">strictness:</span><span class="hl-2"> </span><span class="hl-6">Strictness</span><span class="hl-2">.</span><span class="hl-16">LEGACY</span><span class="hl-2">,</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  </span><span class="hl-7">// Configuration for GeneralHtmlSupport</span><br/><span class="hl-2">  </span><span class="hl-6">htmlSupport:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-6">allow:</span><span class="hl-2"> [</span><br/><span class="hl-2">      {</span><br/><span class="hl-2">        </span><span class="hl-6">name:</span><span class="hl-2"> </span><span class="hl-11">&quot;a&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-6">attributes:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-7">// xlink:actuate is mapped to data-xlink-actuate during data-processing.</span><br/><span class="hl-2">          </span><span class="hl-7">// Thus, as we are in data-view, we need to configure allowed values</span><br/><span class="hl-2">          </span><span class="hl-7">// for the mapped value.</span><br/><span class="hl-2">          </span><span class="hl-11">&quot;data-xlink-actuate&quot;</span><span class="hl-6">:</span><span class="hl-2"> </span><span class="hl-8">true</span><span class="hl-2">,</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    ],</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">});</span>
</code><button>Copy</button></pre>
<p>The above configuration for element <code>&lt;a&gt;</code> will be merged automatically
by GHS with the configuration provided by GRS. Thus, the attribute <code>dir</code> may
still be provided as configured by GRS. Just as any other attributes registered
by GRS.</p>
<a id="md:known-issues" class="tsd-anchor"></a><h2><a href="#md:known-issues">Known Issues</a></h2><ul>
<li><p><a href="https://github.com/ckeditor/ckeditor5/issues/9960" title="[GHS] Support for empty elements · Issue #9960 · ckeditor/ckeditor5"><a href="https://ckeditor.com/docs/ckeditor5/latest/api/html-support.html" title="CKEditor 5 HTML Support feature - CKEditor 5 API docs">GHS</a> Support for empty elements · Issue #9960</a></p>
<p><strong>Effect:</strong> <code>&lt;br&gt;</code> cannot handle a <code>class</code> attribute (which is valid
CoreMedia RichText 1.0, though).</p>
</li>
</ul>
</section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><h3 class="tsd-index-heading uppercase">Index</h3><section class="tsd-index-section"><h3 class="tsd-index-heading">Classes</h3><div class="tsd-index-list"><a href="../classes/ckeditor5_coremedia_richtext_support.CoreMediaRichText10Dtd.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>Core<wbr/>Media<wbr/>Rich<wbr/>Text10<wbr/>Dtd</span></a>
<a href="../classes/ckeditor5_coremedia_richtext_support.GeneralRichTextSupport.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>General<wbr/>Rich<wbr/>Text<wbr/>Support</span></a>
<a href="../classes/ckeditor5_coremedia_richtext_support.RichTextDataFilter.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>Rich<wbr/>Text<wbr/>Data<wbr/>Filter</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Interfaces</h3><div class="tsd-index-list"><a href="../interfaces/ckeditor5_coremedia_richtext_support.CoreMediaRichTextSupportConfig.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Core<wbr/>Media<wbr/>Rich<wbr/>Text<wbr/>Support<wbr/>Config</span></a>
<a href="../interfaces/ckeditor5_coremedia_richtext_support.InheritingMatcherPattern.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Inheriting<wbr/>Matcher<wbr/>Pattern</span></a>
<a href="../interfaces/ckeditor5_coremedia_richtext_support.ReducedMatcherPattern.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Reduced<wbr/>Matcher<wbr/>Pattern</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Type Aliases</h3><div class="tsd-index-list"><a href="../types/ckeditor5_coremedia_richtext_support.AttributesType.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Attributes<wbr/>Type</span></a>
<a href="../types/ckeditor5_coremedia_richtext_support.MatcherPatternLookup.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Matcher<wbr/>Pattern<wbr/>Lookup</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Variables</h3><div class="tsd-index-list"><a href="../variables/ckeditor5_coremedia_richtext_support.COREMEDIA_RICHTEXT_1_0_CONFIG.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-32"></use></svg><span>COREMEDIA_<wbr/>RICHTEXT_<wbr/>1_<wbr/>0_<wbr/>CONFIG</span></a>
<a href="../variables/ckeditor5_coremedia_richtext_support.COREMEDIA_RICHTEXT_SUPPORT_CONFIG_KEY.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-32"></use></svg><span>COREMEDIA_<wbr/>RICHTEXT_<wbr/>SUPPORT_<wbr/>CONFIG_<wbr/>KEY</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Functions</h3><div class="tsd-index-list"><a href="../functions/ckeditor5_coremedia_richtext_support.findFirstPattern.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>find<wbr/>First<wbr/>Pattern</span></a>
<a href="../functions/ckeditor5_coremedia_richtext_support.getConfig.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>get<wbr/>Config</span></a>
<a href="../functions/ckeditor5_coremedia_richtext_support.mergePatterns.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>merge<wbr/>Patterns</span></a>
<a href="../functions/ckeditor5_coremedia_richtext_support.resolveInheritance.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>resolve<wbr/>Inheritance</span></a>
<a href="../functions/ckeditor5_coremedia_richtext_support.toLookupStrategy.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>to<wbr/>Lookup<wbr/>Strategy</span></a>
</div></section></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:coremedia-general-richtext-support"><span>Core<wbr/>Media <wbr/>General <wbr/>Rich<wbr/>Text <wbr/>Support</span></a><ul><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:do-i-need-to-install-grs"><span>Do <wbr/>I need to install GRS?</span></a></li><li><a href="#md:source-editing"><span>Source <wbr/>Editing</span></a></li><li><a href="#md:pitfall-customizing-default-data-processing"><span>Pitfall: <wbr/>Customizing <wbr/>Default <wbr/>Data-<wbr/>Processing</span></a></li><li><a href="#md:note-on-strictnesslegacy-and-disappearing-attributes"><span>Note on <wbr/>Strictness.LEGACY and <wbr/>Disappearing <wbr/>Attributes</span></a></li><li><a href="#md:known-issues"><span>Known <wbr/>Issues</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>CoreMedia CKEditor 5 Plugins</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>